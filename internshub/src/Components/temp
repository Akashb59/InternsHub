import React, { useState } from 'react';
import { Link } from 'react-router-dom';
import useQueryString from 'use-query-string';

function updateHistory(path) {
  window.history.pushState(null, document.title, path);
}
function StudentHome() {
  const [query, setQuery] = useQueryString(window.location, updateHistory, {
    parseBooleans: true
  });
  const [filterState, setFilterState] = useState({
    startsOn: '',
    type: '',
    stipend1: '',
    stipend2: '',
    stipend3: '',
    stipend4: '',
    category: '',
    duration1: '',
    duration2: '',
    duration3: ''
  });

  function onFilterChange(event) {
    const { name, value, type, checked } = event.target;
    type === 'checkbox'
      ? setQuery({ [name]: checked })
      : setQuery({ [name]: value });
  }

  const handleSubmit = e => {
    e.preventDefault();
    const filter = {
      stipend: filterState.stipend,
      starts_on: filterState.starts_on,
      type_of_internship: filterState.type,
      requiredSkills: filterState.requiredSkills,
      duration: filterState.duration
    };
    // setQuery({
    //   stipend: filterState.stipend,
    //   starts_on: filterState.starts_on,
    //   type_of_internship: filterState.type,
    //   requiredSkills: filterState.requiredSkills,
    //   duration: filterState.duration
    // });
    console.log(filter);
  };

  return (
    <div className="container-fluid">
      <p>{filterState.type}</p>
      <div className="jumbotron mt-5">
        <div className="col-sm-8 mx-auto display-4 text-center">WELCOME</div>
        <Link to="/selectedInternship" className="nav-link">
          Select Internship
        </Link>
        <p>USER:{localStorage.userid}</p>
        <p>STUDENT:{localStorage.studentid}</p>
      </div>
      <form onSubmit={handleSubmit}>
        <label>
          <input
            type="radio"
            name="type"
            value="paid"
            checked={query.type === 'paid'}
            onChange={onFilterChange}
          />
          Paid
        </label>
        <br />
        <label>
          <input
            type="radio"
            name="type"
            value="free"
            checked={query.type === 'free'}
            onChange={onFilterChange}
          />
          Free
        </label>
        <br />
        <br />
        <label>
          <input
            type="radio"
            name="category"
            value="fulltime"
            checked={query.category === 'fulltime'}
            onChange={onFilterChange}
          />
          Full Time
        </label>
        <br />
        <label>
          <input
            type="radio"
            name="category"
            value="parttime"
            checked={query.category === 'parttime'}
            onChange={onFilterChange}
          />
          Part Time
        </label>
        <br />
        <br />
        <label htmlFor="duration1">
          <input
            type="checkbox"
            //className="custom-control-input"
            name="duration1"
            checked={query.duration1}
            onChange={onFilterChange}
            id="duration1"
          />
          0 to 2 Months
        </label>
        <br />
        <label htmlFor="duration2">
          <input
            type="checkbox"
            //className="custom-control-input"
            name="duration2"
            checked={query.duration2}
            onChange={onFilterChange}
            id="duration2"
          />
          2 to 4 Months
        </label>
        <br />
        <label htmlFor="duration3">
          <input
            type="checkbox"
            //className="custom-control-input"
            name="duration3"
            checked={query.duration3}
            onChange={onFilterChange}
            id="duration3"
          />
          4 Months and Above
        </label>
        <br />
        <br />
        <label htmlFor="stipend1">
          <input
            type="checkbox"
            //className="custom-control-input"
            name="stipend1"
            checked={query.stipend1}
            onChange={onFilterChange}
            id="stipend1"
          />
          No Stipend
        </label>
        <br />
        <label htmlFor="stipend2">
          <input
            type="checkbox"
            //className="custom-control-input"
            name="stipend2"
            checked={query.stipend2}
            onChange={onFilterChange}
            id="stipend2"
          />
          Below Rs.5000
        </label>
        <br />
        <label htmlFor="stipend3">
          <input
            type="checkbox"
            //className="custom-control-input"
            name="stipend3"
            checked={query.stipend3}
            onChange={onFilterChange}
            id="stipend3"
          />
          Between Rs.5000 and Rs.10,000
        </label>
        <br />
        <label htmlFor="stipend4">
          <input
            type="checkbox"
            //className="custom-control-input"
            name="stipend4"
            checked={query.stipend4}
            onChange={onFilterChange}
            id="stipend4"
          />
          Rs.10,000 and above
        </label>
        <br />
        <br />
        <label htmlFor="starts_on">
          Starts On:
          <input
            type="date"
            className="form-control"
            name="starts_on"
            value={query.starts}
            onChange={onFilterChange}
            required
          />
        </label>
      </form>
    </div>
  );
}
export default StudentHome;
